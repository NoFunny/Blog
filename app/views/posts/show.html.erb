<%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
<h1><%= @post.title %></h1>
<p><%= @post.body %></p>
<hr>
<% if logged_in? %>
  <% if can? :manage, @all %>
    <%= link_to "Редактировать", edit_post_path(@post), :class => 'btn btn-warning' %>
  <%= link_to "Удалить пост", post_path(@post), method: :delete, data: {confirm: "Хотите удалить статью?"}, :class => 'btn btn-danger' %>
  <% end %>
<hr>
<h1>Все комментарии</h1>
<% @post.comments.each do |comment| %>
  <div class="alert alert-light">
    <p><strong><%= comment.username %></strong>: <%= comment.body %></p>
  </div>
<% end %>
<hr>
<% if logged_in? %>
Добавление комментария
<%= form_for([@post, @post.comments.build]) do |f| %>
  <p>
    Ты <%= params[current_user.name] %> <br>
    <%#= f.text_field(:username, {:class => 'form-control'}) %>
  </p>
  <p>
    Текст комментария <br>
    <%= f.text_area(:body, {:class => 'form-control'}) %>
  </p>
  <p>
    <%= f.submit("Добавить комментарий",{:class => 'btn btn-warning'}) %>
  </p>
    <% end %>
  <% end %>
<% end %>